{{ $pages := where .Site.RegularPages "Section" "posts" }}
{{ $announcements := where $pages "Params.announcement" true }}

{{ if $announcements }}
<section class="not-prose">
    <div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
        <div class="text-center">
            <h2 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-4xl">
                Latest Announcements
            </h2>
            <p class="mt-4 text-lg text-gray-600 dark:text-gray-300">
                Stay updated with our latest news and announcements
            </p>
        </div>
        
        <div class="mt-12 grid gap-8 lg:grid-cols-2 xl:grid-cols-3">
            {{ range first 6 $announcements }}
            <article class="group relative overflow-hidden rounded-lg bg-white shadow-lg transition-shadow duration-300 hover:shadow-xl dark:bg-gray-800">
                {{ if .Params.cover }}
                <div class="aspect-w-16 aspect-h-9">
                    {{ $cover := .Resources.GetMatch .Params.cover }}
                    {{ if $cover }}
                    <img class="h-48 w-full object-cover transition-transform duration-300 group-hover:scale-105" 
                         src="{{ $cover.RelPermalink }}" 
                         alt="{{ .Title }}">
                    {{ else }}
                    <img class="h-48 w-full object-cover transition-transform duration-300 group-hover:scale-105" 
                         src="{{ .Params.cover }}" 
                         alt="{{ .Title }}">
                    {{ end }}
                </div>
                {{ end }}
                
                <div class="p-6">
                    <div class="flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400">
                        <time datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ .Date.Format "January 2, 2006" }}
                        </time>
                        {{ if .Params.tags }}
                        <span>â€¢</span>
                        <span>{{ delimit .Params.tags ", " }}</span>
                        {{ end }}
                    </div>
                    
                    <h3 class="mt-2 text-xl font-semibold text-gray-900 dark:text-white">
                        <a href="{{ .RelPermalink }}" class="hover:text-primary-600 dark:hover:text-primary-400">
                            {{ .Title }}
                        </a>
                    </h3>
                    
                    {{ if .Summary }}
                    <p class="mt-3 text-gray-600 dark:text-gray-300 line-clamp-3">
                        {{ .Summary }}
                    </p>
                    {{ end }}
                    
                    <div class="mt-4">
                        <a href="{{ .RelPermalink }}" 
                           class="inline-flex items-center text-sm font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300">
                            Read more
                            <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </article>
            {{ end }}
        </div>
        
        {{ if gt (len $announcements) 6 }}
        <div class="mt-8 text-center">
            <a href="{{ "posts" | relURL }}" 
               class="inline-flex items-center rounded-md bg-primary-600 px-4 py-2 text-sm font-medium text-white hover:bg-primary-500 dark:bg-primary-500 dark:hover:bg-primary-400">
                View All Announcements
                <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </a>
        </div>
        {{ end }}
    </div>
</section>
{{ end }}
